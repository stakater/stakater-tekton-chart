{{ if .Values.eventlistener.enabled }}
apiVersion: triggers.tekton.dev/v1alpha1
kind: EventListener
metadata:
  name: {{ include "pipeline-charts.name" . }}
  namespace: {{ .Release.Namespace }}
spec:
  serviceAccountName: {{ .Values.eventlistener.serviceAccountName }}
  {{- if or .Values.triggers.eventlistenerTriggers .Values.eventlistener.triggers }}
  triggers:
  {{- if .Values.eventlistener.triggers }}
  {{- range .Values.eventlistener.triggers }}
  - triggerRef: {{ . }}
  {{- end }}
  {{- else if .Values.triggers.eventlistenerTriggers }}
  {{- range .Values.triggers.eventlistenerTriggers }}
  {{- if .triggerName }}
  - triggerRef: {{ include "pipeline-charts.name" $ }}-{{ .triggerName }}
  {{- else }}
  - triggerRef: {{ include "pipeline-charts.name" $ }}-{{ .defaultTriggerName }}
  {{- end }}
  {{- end }}
  {{- end }}
  {{- end }}
{{- end }}